/* ---- TOKENS ---- */

CREATE TABLE token
(
    name TEXT NOT NULL UNIQUE
);

CREATE TABLE token_unit
(
    token_name TEXT NOT NULL REFERENCES token (name),
    denom      TEXT NOT NULL UNIQUE,
    exponent   INT  NOT NULL,
    aliases    TEXT[],
    price_id   TEXT
);


/* ---- TOKEN PRICES ---- */

CREATE TABLE token_price
(
    /* Needed for the below token_price function to work properly */
    id         SERIAL                      NOT NULL PRIMARY KEY,

    unit_name  TEXT                        NOT NULL REFERENCES token_unit (denom) UNIQUE,
    price      DECIMAL                     NOT NULL,
    market_cap BIGINT                      NOT NULL,
    timestamp  TIMESTAMP WITHOUT TIME ZONE NOT NULL
);
CREATE INDEX token_price_timestamp_index ON token_price (timestamp);


CREATE TABLE token_price_history
(
    id         SERIAL                      NOT NULL PRIMARY KEY,
    unit_name  TEXT                        NOT NULL REFERENCES token_unit (denom),
    price      DECIMAL                     NOT NULL,
    market_cap BIGINT                      NOT NULL,
    timestamp  TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    CONSTRAINT unique_price_for_timestamp UNIQUE (unit_name, timestamp)
);
CREATE INDEX token_price_history_timestamp_index ON token_price_history (timestamp);

-- Insert tokens
INSERT INTO token (name) VALUES
('coreum');

-- Insert token units
INSERT INTO token_unit (token_name, denom, exponent, aliases, price_id) VALUES
('coreum', 'coreum', 6, NULL, 'coreum');

-- Insert current token prices
INSERT INTO token_price (unit_name, price, market_cap, timestamp) VALUES
('coreum', 0.1, 0, '2024-08-07T12:00:00.000');

INSERT INTO token_price_history (unit_name, price, market_cap, timestamp) VALUES
('coreum', 0.065781, 1000000, '2024-08-05T22:17:50.949'),
('coreum', 0.065741, 1002000, '2024-08-05T22:07:14.246'),
('coreum', 0.065572, 1004000, '2024-08-05T21:56:55.105'),
('coreum', 0.065575, 1006000, '2024-08-05T21:46:26.219'),
('coreum', 0.065399, 1008000, '2024-08-05T21:36:14.062'),
('coreum', 0.065143, 1010000, '2024-08-05T21:26:13.842'),
('coreum', 0.064971, 1012000, '2024-08-05T21:16:11.641'),
('coreum', 0.064916, 1014000, '2024-08-05T21:05:59.989'),
('coreum', 0.064752, 1016000, '2024-08-05T20:55:26.299'),
('coreum', 0.065222, 1018000, '2024-08-05T20:45:05.018'),
('coreum', 0.064889, 1020000, '2024-08-05T20:35:22.965'),
('coreum', 0.064969, 1022000, '2024-08-05T20:25:42.112'),
('coreum', 0.064709, 1024000, '2024-08-05T20:15:05.704'),
('coreum', 0.065089, 1026000, '2024-08-05T20:04:14.768'),
('coreum', 0.065354, 1028000, '2024-08-05T19:53:48.106'),
('coreum', 0.065254, 1030000, '2024-08-05T19:44:25.412'),
('coreum', 0.065391, 1032000, '2024-08-05T19:34:02.339'),
('coreum', 0.065306, 1034000, '2024-08-05T19:23:31.176'),
('coreum', 0.065468, 1036000, '2024-08-05T19:13:18.062'),
('coreum', 0.065797, 1038000, '2024-08-05T18:52:36.489'),
('coreum', 0.065823, 1040000, '2024-08-05T18:42:20.206'),
('coreum', 0.066079, 1042000, '2024-08-05T18:32:42.950'),
('coreum', 0.066546, 1044000, '2024-08-05T18:22:17.523'),
('coreum', 0.066675, 1046000, '2024-08-05T18:11:27.400'),
('coreum', 0.066708, 1048000, '2024-08-05T18:02:00.338'),
('coreum', 0.067019, 1050000, '2024-08-05T17:51:50.542'),
('coreum', 0.066641, 1052000, '2024-08-05T17:41:24.754'),
('coreum', 0.066590, 1054000, '2024-08-05T17:31:22.163'),
('coreum', 0.066673, 1056000, '2024-08-05T17:20:23.050'),
('coreum', 0.066227, 1058000, '2024-08-05T17:10:15.833'),
('coreum', 0.066217, 1060000, '2024-08-05T16:59:14.589'),
('coreum', 0.065968, 1062000, '2024-08-05T16:49:50.482'),
('coreum', 0.066027, 1064000, '2024-08-05T16:39:05.494'),
('coreum', 0.066262, 1066000, '2024-08-05T16:29:28.570'),
('coreum', 0.065875, 1068000, '2024-08-05T16:18:16.039'),
('coreum', 0.065756, 1070000, '2024-08-05T16:08:56.773'),
('coreum', 0.065690, 1072000, '2024-08-05T15:58:20.862'),
('coreum', 0.065558, 1074000, '2024-08-05T15:47:57.417'),
('coreum', 0.064619, 1076000, '2024-08-05T15:38:10.270'),
('coreum', 0.064748, 1078000, '2024-08-05T15:27:08.915'),
('coreum', 0.064327, 1080000, '2024-08-05T15:17:25.592'),
('coreum', 0.063868, 1082000, '2024-08-05T15:07:11.357'),
('coreum', 0.063438, 1084000, '2024-08-05T14:56:52.708'),
('coreum', 0.063274, 1086000, '2024-08-05T14:46:22.206'),
('coreum', 0.063012, 1088000, '2024-08-05T14:36:28.037'),
('coreum', 0.062577, 1090000, '2024-08-05T14:25:36.178'),
('coreum', 0.062074, 1092000, '2024-08-05T14:15:29.585'),
('coreum', 0.062391, 1094000, '2024-08-05T14:06:00.105'),
('coreum', 0.061204, 1096000, '2024-08-05T13:55:15.414'),
('coreum', 0.060369, 1098000, '2024-08-05T13:43:18.426'),
('coreum', 0.061330, 1100000, '2024-08-05T13:34:12.280'),
('coreum', 0.060425, 1102000, '2024-08-05T13:24:54.921'),
('coreum', 0.060508, 1104000, '2024-08-05T13:14:15.644'),
('coreum', 0.060532, 1106000, '2024-08-05T13:03:57.009'),
('coreum', 0.060514, 1108000, '2024-08-05T12:53:05.722'),
('coreum', 0.061078, 1110000, '2024-08-05T12:43:10.269'),
('coreum', 0.060972, 1112000, '2024-08-05T12:32:39.091'),
('coreum', 0.060623, 1114000, '2024-08-05T12:22:53.237'),
('coreum', 0.060767, 1116000, '2024-08-05T12:12:02.850'),
('coreum', 0.060743, 1118000, '2024-08-05T12:01:26.441'),
('coreum', 0.060768, 1120000, '2024-08-05T11:51:56.448'),
('coreum', 0.060159, 1122000, '2024-08-05T11:40:55.542'),
('coreum', 0.059769, 1124000, '2024-08-05T11:30:04.434'),
('coreum', 0.060714, 1126000, '2024-08-05T11:19:51.144'),
('coreum', 0.060598, 1128000, '2024-08-05T11:09:19.989'),
('coreum', 0.060770, 1130000, '2024-08-05T10:58:54.666'),
('coreum', 0.060985, 1132000, '2024-08-05T10:48:16.238'),
('coreum', 0.060455, 1134000, '2024-08-05T10:38:07.829'),
('coreum', 0.070225, 1150000, '2024-08-04T11:51:40.181'),
('coreum', 0.070202, 1151000, '2024-08-04T11:41:52.046'),
('coreum', 0.070148, 1152000, '2024-08-04T11:31:58.669'),
('coreum', 0.070148, 1153000, '2024-08-04T11:20:33.567'),
('coreum', 0.070218, 1154000, '2024-08-04T11:10:55.967'),
('coreum', 0.070180, 1155000, '2024-08-04T10:59:44.891'),
('coreum', 0.070170, 1156000, '2024-08-04T10:49:38.696'),
('coreum', 0.070186, 1157000, '2024-08-04T10:39:47.236'),
('coreum', 0.070191, 1158000, '2024-08-04T10:28:03.010'),
('coreum', 0.070204, 1159000, '2024-08-04T10:18:25.858'),
('coreum', 0.070166, 1160000, '2024-08-04T10:07:54.659'),
('coreum', 0.070140, 1161000, '2024-08-04T09:57:23.311'),
('coreum', 0.070191, 1162000, '2024-08-04T09:47:48.408'),
('coreum', 0.070171, 1163000, '2024-08-04T09:37:07.188'),
('coreum', 0.069991, 1164000, '2024-08-04T09:26:51.769'),
('coreum', 0.069984, 1165000, '2024-08-04T09:16:56.278'),
('coreum', 0.069973, 1166000, '2024-08-04T09:06:55.474'),
('coreum', 0.069987, 1167000, '2024-08-04T08:55:44.174'),
('coreum', 0.070019, 1168000, '2024-08-04T08:45:46.895'),
('coreum', 0.069832, 1169000, '2024-08-04T08:35:33.319'),
('coreum', 0.069627, 1170000, '2024-08-04T08:24:47.573'),
('coreum', 0.069562, 1171000, '2024-08-04T08:14:45.497'),
('coreum', 0.069520, 1172000, '2024-08-04T08:04:12.820'),
('coreum', 0.069631, 1173000, '2024-08-04T07:53:52.117'),
('coreum', 0.069508, 1174000, '2024-08-04T07:43:58.932'),
('coreum', 0.069378, 1175000, '2024-08-04T07:33:06.804'),
('coreum', 0.069396, 1176000, '2024-08-04T07:22:43.773'),
('coreum', 0.069416, 1177000, '2024-08-04T07:12:51.365'),
('coreum', 0.069533, 1178000, '2024-08-04T07:02:32.607'),
('coreum', 0.069433, 1179000, '2024-08-04T06:51:45.785'),
('coreum', 0.069375, 1180000, '2024-08-04T06:41:44.474'),
('coreum', 0.069303, 1181000, '2024-08-04T06:31:32.965'),
('coreum', 0.069275, 1182000, '2024-08-04T06:20:44.326'),
('coreum', 0.069271, 1183000, '2024-08-04T06:10:25.133'),
('coreum', 0.069186, 1184000, '2024-08-04T05:59:50.958'),
('coreum', 0.069155, 1185000, '2024-08-04T05:49:48.674'),
('coreum', 0.069092, 1186000, '2024-08-04T05:39:54.451'),
('coreum', 0.069110, 1187000, '2024-08-04T05:28:43.298'),
('coreum', 0.069107, 1188000, '2024-08-04T05:18:57.205'),
('coreum', 0.068976, 1189000, '2024-08-04T05:08:55.086'),
('coreum', 0.068657, 1190000, '2024-08-04T04:57:00.714'),
('coreum', 0.068651, 1191000, '2024-08-04T04:47:44.528'),
('coreum', 0.068668, 1192000, '2024-08-04T04:37:52.310'),
('coreum', 0.068621, 1193000, '2024-08-04T04:26:43.776'),
('coreum', 0.068383, 1194000, '2024-08-04T04:16:08.817'),
('coreum', 0.068300, 1195000, '2024-08-04T04:07:00.707'),
('coreum', 0.068262, 1196000, '2024-08-04T03:54:56.566'),
('coreum', 0.068254, 1197000, '2024-08-04T03:45:47.782'),
('coreum', 0.068274, 1198000, '2024-08-04T03:35:56.505'),
('coreum', 0.068395, 1199000, '2024-08-04T03:24:57.685'),
('coreum', 0.068385, 1200000, '2024-08-04T03:14:55.378'),
('coreum', 0.068355, 1201000, '2024-08-04T03:04:18.156'),
('coreum', 0.068379, 1202000, '2024-08-04T02:53:57.675'),
('coreum', 0.068275, 1203000, '2024-08-04T02:43:53.157'),
('coreum', 0.068320, 1204000, '2024-08-04T02:33:00.699'),
('coreum', 0.068356, 1205000, '2024-08-04T02:22:05.793'),
('coreum', 0.068381, 1206000, '2024-08-04T02:12:42.556'),
('coreum', 0.068319, 1207000, '2024-08-04T02:01:33.808'),
('coreum', 0.068394, 1208000, '2024-08-04T01:51:06.482'),
('coreum', 0.068261, 1209000, '2024-08-04T01:41:02.628'),
('coreum', 0.068292, 1210000, '2024-08-04T01:31:03.534'),
('coreum', 0.068314, 1211000, '2024-08-04T01:20:00.849'),
('coreum', 0.068257, 1212000, '2024-08-04T01:10:04.734'),
('coreum', 0.068223, 1213000, '2024-08-04T00:59:03.949'),
('coreum', 0.068330, 1214000, '2024-08-04T00:49:53.374'),
('coreum', 0.068257, 1215000, '2024-08-04T00:39:03.117'),
('coreum', 0.067709, 1216000, '2024-08-04T00:28:08.881'),
('coreum', 0.067730, 1217000, '2024-08-04T00:19:01.293'),
('coreum', 0.067743, 1218000, '2024-08-04T00:08:53.510'),
('coreum', 0.067604, 1219000, '2024-08-03T23:57:59.952'),
('coreum', 0.067632, 1220000, '2024-08-03T23:47:49.042'),
('coreum', 0.067738, 1221000, '2024-08-03T23:37:06.466'),
('coreum', 0.068443, 1222000, '2024-08-03T23:26:59.898'),
('coreum', 0.068795, 1223000, '2024-08-03T23:17:02.730'),
('coreum', 0.069502, 1224000, '2024-08-03T23:06:49.144'),
('coreum', 0.070448, 1225000, '2024-08-03T22:55:48.689'),
('coreum', 0.071341, 1226000, '2024-08-03T22:45:51.562'),
('coreum', 0.071405, 1227000, '2024-08-03T22:36:08.952'),
('coreum', 0.071420, 1228000, '2024-08-03T22:26:02.264'),
('coreum', 0.071152, 1229000, '2024-08-03T22:14:50.794'),
('coreum', 0.071129, 1230000, '2024-08-03T22:05:08.014'),
('coreum', 0.070836, 1231000, '2024-08-03T21:54:43.017'),
('coreum', 0.070715, 1232000, '2024-08-03T21:44:48.821'),
('coreum', 0.070684, 1233000, '2024-08-03T21:33:43.935'),
('coreum', 0.070757, 1234000, '2024-08-03T21:24:03.744'),
('coreum', 0.070616, 1235000, '2024-08-03T21:13:49.811'),
('coreum', 0.070743, 1236000, '2024-08-03T21:03:39.230'),
('coreum', 0.070629, 1237000, '2024-08-03T20:53:45.956'),
('coreum', 0.070775, 1238000, '2024-08-03T20:43:01.541'),
('coreum', 0.070825, 1239000, '2024-08-03T20:32:24.015'),
('coreum', 0.070806, 1240000, '2024-08-03T20:23:04.624'),
('coreum', 0.070586, 1241000, '2024-08-03T20:12:58.527'),
('coreum', 0.070611, 1242000, '2024-08-03T20:02:25.953'),
('coreum', 0.070768, 1243000, '2024-08-03T19:51:42.591'),
('coreum', 0.070518, 1244000, '2024-08-03T19:41:51.902'),
('coreum', 0.070325, 1245000, '2024-08-03T19:31:17.165'),
('coreum', 0.070155, 1246000, '2024-08-03T19:20:44.975'),
('coreum', 0.070297, 1247000, '2024-08-03T19:10:43.735'),
('coreum', 0.070237, 1248000, '2024-08-03T19:00:00.342'),
('coreum', 0.070243, 1249000, '2024-08-03T18:50:50.728');


